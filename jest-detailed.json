{"numFailedTestSuites":3,"numFailedTests":5,"numPassedTestSuites":14,"numPassedTests":64,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":1,"numTodoTests":0,"numTotalTestSuites":17,"numTotalTests":69,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1745799080971,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["PineconeMemoryService (unit)"],"duration":25,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService (unit) should cache identical queries for same user (namespace gerenciado internamente)","invocations":1,"location":{"column":3,"line":107},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should cache identical queries for same user (namespace gerenciado internamente)"},{"ancestorTitles":["PineconeMemoryService (unit)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService (unit) should handle persistence service failure gracefully","invocations":1,"location":{"column":3,"line":128},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle persistence service failure gracefully"},{"ancestorTitles":["PineconeMemoryService (unit)"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService (unit) should call electronAPIMock.queryPinecone in Node env","invocations":1,"location":{"column":3,"line":140},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call electronAPIMock.queryPinecone in Node env"},{"ancestorTitles":["PineconeMemoryService (unit)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService (unit) should return empty string if not available or embedding is empty","invocations":1,"location":{"column":3,"line":152},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return empty string if not available or embedding is empty"},{"ancestorTitles":["PineconeMemoryService (unit)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService (unit) should handle rejected promises gracefully","invocations":1,"location":{"column":3,"line":164},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle rejected promises gracefully"}],"endTime":1745799082435,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/PineconeMemoryService.test.ts","startTime":1745799081933,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["TranscriptionContextManager"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionContextManager Deve manter o singleton em toda aplicação","invocations":1,"location":{"column":3,"line":14},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Deve manter o singleton em toda aplicação"},{"ancestorTitles":["TranscriptionContextManager"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionContextManager Deve persistir o contexto entre múltiplas chamadas","invocations":1,"location":{"column":3,"line":23},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Deve persistir o contexto entre múltiplas chamadas"},{"ancestorTitles":["TranscriptionContextManager"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionContextManager Não deve limpar o contexto quando undefined é passado","invocations":1,"location":{"column":3,"line":36},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Não deve limpar o contexto quando undefined é passado"},{"ancestorTitles":["TranscriptionContextManager"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionContextManager Deve substituir o contexto anterior quando string vazia é passada","invocations":1,"location":{"column":3,"line":49},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Deve substituir o contexto anterior quando string vazia é passada"},{"ancestorTitles":["TranscriptionContextManager"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionContextManager hasTemporaryContext deve retornar corretamente","invocations":1,"location":{"column":3,"line":64},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"hasTemporaryContext deve retornar corretamente"}],"endTime":1745799082480,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/tests/TranscriptionContextManager.test.ts","startTime":1745799081984,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["MemoryService"],"duration":37,"failureDetails":[],"failureMessages":[],"fullName":"MemoryService fetchContextualMemory should not throw and return valid SpeakerMemoryResults","invocations":1,"location":{"column":3,"line":46},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"fetchContextualMemory should not throw and return valid SpeakerMemoryResults"}],"endTime":1745799082482,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/MemoryService.test.ts","startTime":1745799081948,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["MemoryService - Isolation Between Namespaces"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"MemoryService - Isolation Between Namespaces deve garantir isolamento entre diferentes usuários com namespaces gerenciados internamente","invocations":1,"location":{"column":3,"line":102},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"deve garantir isolamento entre diferentes usuários com namespaces gerenciados internamente"},{"ancestorTitles":["MemoryService - Isolation Between Namespaces"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"MemoryService - Isolation Between Namespaces deve persistir o contexto temporário entre chamadas","invocations":1,"location":{"column":3,"line":139},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"deve persistir o contexto temporário entre chamadas"},{"ancestorTitles":["MemoryService - Isolation Between Namespaces"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"MemoryService - Isolation Between Namespaces deve atualizar o contexto temporário quando for diferente","invocations":1,"location":{"column":3,"line":174},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"deve atualizar o contexto temporário quando for diferente"}],"endTime":1745799082450,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/MemoryService.integration.test.ts","startTime":1745799081939,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["TranscriptionSnapshotTracker"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionSnapshotTracker Mensagem nova é tratada corretamente sem duplicações nem confusão de contexto","invocations":1,"location":{"column":3,"line":52},"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"Mensagem nova é tratada corretamente sem duplicações nem confusão de contexto"},{"ancestorTitles":["TranscriptionSnapshotTracker"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionSnapshotTracker Multiple messages are properly deduplicated","invocations":1,"location":{"column":3,"line":126},"numPassingAsserts":11,"retryReasons":[],"status":"passed","title":"Multiple messages are properly deduplicated"},{"ancestorTitles":["TranscriptionSnapshotTracker"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionSnapshotTracker Temporary context é deduplicado entre execuções","invocations":1,"location":{"column":3,"line":202},"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"Temporary context é deduplicado entre execuções"},{"ancestorTitles":["TranscriptionSnapshotTracker"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionSnapshotTracker Temporary context com objetos dinamicamente criados","invocations":1,"location":{"column":3,"line":280},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Temporary context com objetos dinamicamente criados"}],"endTime":1745799082486,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/tests/TranscriptionSnapshotTracker.test.ts","startTime":1745799081959,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ConversationHistoryManager"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"ConversationHistoryManager should initialize with system message","invocations":1,"location":{"column":3,"line":10},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should initialize with system message"},{"ancestorTitles":["ConversationHistoryManager"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"ConversationHistoryManager should add messages and prune history when exceeding maxInteractions","invocations":1,"location":{"column":3,"line":15},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should add messages and prune history when exceeding maxInteractions"}],"endTime":1745799082486,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/ConversationHistoryManager.test.ts","startTime":1745799081966,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["TranscriptionContextPersistence"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionContextPersistence Contexto temporário deve persistir entre diferentes instâncias de MemoryContextBuilder","invocations":1,"location":{"column":3,"line":98},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Contexto temporário deve persistir entre diferentes instâncias de MemoryContextBuilder"},{"ancestorTitles":["TranscriptionContextPersistence"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionContextPersistence Resetar temporaryContext deve afetar todas as instâncias","invocations":1,"location":{"column":3,"line":155},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Resetar temporaryContext deve afetar todas as instâncias"},{"ancestorTitles":["TranscriptionContextPersistence"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionContextPersistence resetAll deve limpar tanto snapshot quanto contexto temporário","invocations":1,"location":{"column":3,"line":214},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"resetAll deve limpar tanto snapshot quanto contexto temporário"},{"ancestorTitles":["TranscriptionContextPersistence"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionContextPersistence A memória do contexto temporário deve persistir entre chamadas","invocations":1,"location":{"column":3,"line":269},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"A memória do contexto temporário deve persistir entre chamadas"},{"ancestorTitles":["TranscriptionContextPersistence"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionContextPersistence Pinecone só deve ser consultado para o temporaryContext quando ele mudar","invocations":1,"location":{"column":3,"line":326},"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"Pinecone só deve ser consultado para o temporaryContext quando ele mudar"}],"endTime":1745799082508,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/tests/TranscriptionContextPersistence.test.ts","startTime":1745799081982,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ConversationImportService"],"duration":24,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/ConversationImportService.test.ts:66:47)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"ConversationImportService should import and enrich messages from a JS object (no file)","invocations":1,"location":{"column":3,"line":27},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should import and enrich messages from a JS object (no file)"},{"ancestorTitles":["ConversationImportService"],"duration":8,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m\n    at Object.<anonymous> (/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/ConversationImportService.test.ts:124:47)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"ConversationImportService should import and enrich messages from a sample JSON","invocations":1,"location":{"column":3,"line":81},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should import and enrich messages from a sample JSON"}],"endTime":1745799082523,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConversationImportService › should import and enrich messages from a JS object (no file)\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    Expected number of calls: >= \u001b[32m1\u001b[39m\n    Received number of calls:    \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 64 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 65 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 66 |\u001b[39m     expect(window\u001b[33m.\u001b[39melectronAPI\u001b[33m.\u001b[39msaveToPinecone)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 67 |\u001b[39m     \u001b[36mconst\u001b[39m batch \u001b[33m=\u001b[39m (window\u001b[33m.\u001b[39melectronAPI\u001b[33m.\u001b[39msaveToPinecone \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m][\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 68 |\u001b[39m     \u001b[36mconst\u001b[39m sorted \u001b[33m=\u001b[39m batch\u001b[33m.\u001b[39msort((a\u001b[33m:\u001b[39m { metadata\u001b[33m:\u001b[39m \u001b[33mVectorMetadata\u001b[39m }\u001b[33m,\u001b[39m b\u001b[33m:\u001b[39m { metadata\u001b[33m:\u001b[39m \u001b[33mVectorMetadata\u001b[39m }) \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m       \u001b[36mconst\u001b[39m ma \u001b[33m=\u001b[39m a\u001b[33m.\u001b[39mmetadata \u001b[36mas\u001b[39m \u001b[33mVectorMetadata\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/components/context/deepgram/services/memory/ConversationImportService.test.ts\u001b[39m\u001b[0m\u001b[2m:66:47)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConversationImportService › should import and enrich messages from a sample JSON\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    Expected number of calls: >= \u001b[32m1\u001b[39m\n    Received number of calls:    \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 122 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 123 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 124 |\u001b[39m     expect(window\u001b[33m.\u001b[39melectronAPI\u001b[33m.\u001b[39msaveToPinecone)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 125 |\u001b[39m     \u001b[36mconst\u001b[39m batch \u001b[33m=\u001b[39m (window\u001b[33m.\u001b[39melectronAPI\u001b[33m.\u001b[39msaveToPinecone \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m][\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 126 |\u001b[39m     \u001b[36mconst\u001b[39m sorted \u001b[33m=\u001b[39m batch\u001b[33m.\u001b[39msort((a\u001b[33m:\u001b[39m { metadata\u001b[33m:\u001b[39m \u001b[33mVectorMetadata\u001b[39m }\u001b[33m,\u001b[39m b\u001b[33m:\u001b[39m { metadata\u001b[33m:\u001b[39m \u001b[33mVectorMetadata\u001b[39m }) \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 127 |\u001b[39m       \u001b[36mconst\u001b[39m ma \u001b[33m=\u001b[39m a\u001b[33m.\u001b[39mmetadata \u001b[36mas\u001b[39m \u001b[33mVectorMetadata\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/components/context/deepgram/services/memory/ConversationImportService.test.ts\u001b[39m\u001b[0m\u001b[2m:124:47)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/ConversationImportService.test.ts","startTime":1745799081945,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["TemporaryContextQueryBehavior"],"duration":36,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextQueryBehavior Deve fazer nova consulta ao Pinecone quando instruções são modificadas","invocations":1,"location":{"column":3,"line":86},"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"Deve fazer nova consulta ao Pinecone quando instruções são modificadas"},{"ancestorTitles":["TemporaryContextQueryBehavior"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextQueryBehavior Pequenas modificações nas instruções devem gerar nova consulta","invocations":1,"location":{"column":3,"line":121},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"Pequenas modificações nas instruções devem gerar nova consulta"},{"ancestorTitles":["TemporaryContextQueryBehavior"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextQueryBehavior Modificações de formatação (espaços extras) devem gerar nova consulta","invocations":1,"location":{"column":3,"line":144},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"Modificações de formatação (espaços extras) devem gerar nova consulta"},{"ancestorTitles":["TemporaryContextQueryBehavior"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextQueryBehavior Os embeddings devem ser diferentes para instruções diferentes","invocations":1,"location":{"column":3,"line":167},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Os embeddings devem ser diferentes para instruções diferentes"},{"ancestorTitles":["TemporaryContextQueryBehavior"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextQueryBehavior Deve preservar memória quando é feita a mesma consulta","invocations":1,"location":{"column":3,"line":193},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Deve preservar memória quando é feita a mesma consulta"},{"ancestorTitles":["TemporaryContextQueryBehavior"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextQueryBehavior Contexto dinâmico que muda entre chamadas deve gerar nova consulta","invocations":1,"location":{"column":3,"line":218},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"Contexto dinâmico que muda entre chamadas deve gerar nova consulta"}],"endTime":1745799082497,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/tests/TemporaryContextQueryBehavior.test.ts","startTime":1745799081950,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["LoggingUtils"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LoggingUtils should log info and error with correct prefix","invocations":1,"location":{"column":3,"line":4},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should log info and error with correct prefix"}],"endTime":1745799082555,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/LoggingUtils.test.ts","startTime":1745799082518,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["MemoryContextBuilder (unit)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MemoryContextBuilder (unit) should return empty SpeakerMemoryResults if embedding is not initialized","invocations":1,"location":{"column":3,"line":30},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return empty SpeakerMemoryResults if embedding is not initialized"},{"ancestorTitles":["MemoryContextBuilder (unit)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"MemoryContextBuilder (unit) should call persistenceService.queryMemory for external speakers","invocations":1,"location":{"column":3,"line":43},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should call persistenceService.queryMemory for external speakers"}],"endTime":1745799082563,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/MemoryContextBuilder.test.ts","startTime":1745799082517,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["TranscriptionSnapshotTracker Basic Functionality"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionSnapshotTracker Basic Functionality filterTranscription removes existing content","invocations":1,"location":{"column":3,"line":12},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"filterTranscription removes existing content"},{"ancestorTitles":["TranscriptionSnapshotTracker Basic Functionality"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionSnapshotTracker Basic Functionality filtering twice returns empty string","invocations":1,"location":{"column":3,"line":25},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"filtering twice returns empty string"},{"ancestorTitles":["TranscriptionSnapshotTracker Basic Functionality"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionSnapshotTracker Basic Functionality reset clears the snapshot","invocations":1,"location":{"column":3,"line":40},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"reset clears the snapshot"},{"ancestorTitles":["TranscriptionSnapshotTracker Basic Functionality"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionSnapshotTracker Basic Functionality normalization handles whitespace and empty lines","invocations":1,"location":{"column":3,"line":56},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"normalization handles whitespace and empty lines"}],"endTime":1745799082567,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/tests/TranscriptionSnapshotTracker.simple.test.ts","startTime":1745799082525,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PineconeMemoryService Buffer Tests"],"duration":42,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService Buffer Tests countTokens deve contar tokens corretamente com o modelo text-embedding-3-large","invocations":1,"location":{"column":3,"line":76},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"countTokens deve contar tokens corretamente com o modelo text-embedding-3-large"},{"ancestorTitles":["PineconeMemoryService Buffer Tests"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService Buffer Tests A estrutura do buffer pode ser manipulada diretamente","invocations":1,"location":{"column":3,"line":93},"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"A estrutura do buffer pode ser manipulada diretamente"},{"ancestorTitles":["PineconeMemoryService Buffer Tests"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService Buffer Tests countBufferTokens deve contar corretamente os tokens no buffer","invocations":1,"location":{"column":3,"line":138},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"countBufferTokens deve contar corretamente os tokens no buffer"},{"ancestorTitles":["PineconeMemoryService Buffer Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService Buffer Tests groupTranscriptionsBySpeaker deve agrupar corretamente as transcrições por falante","invocations":1,"location":{"column":3,"line":179},"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"groupTranscriptionsBySpeaker deve agrupar corretamente as transcrições por falante"},{"ancestorTitles":["PineconeMemoryService Buffer Tests"],"duration":4,"failureDetails":[{"matcherResult":{"actual":true,"expected":false,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\nReceived: \u001b[31mtrue\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\nReceived: \u001b[31mtrue\u001b[39m\n    at Object.<anonymous> (/Users/guilhermeferraribrescia/nu-viss-laug/src/tests/PineconeBuffer.test.ts:255:41)\n    at Promise.then.completed (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"PineconeMemoryService Buffer Tests shouldFlushBuffer deve identificar corretamente quando o buffer deve ser esvaziado com base nos tokens","invocations":1,"location":{"column":3,"line":220},"numPassingAsserts":3,"retryReasons":[],"status":"failed","title":"shouldFlushBuffer deve identificar corretamente quando o buffer deve ser esvaziado com base nos tokens"},{"ancestorTitles":["PineconeMemoryService Buffer Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService Buffer Tests saveInteraction deve adicionar mensagens ao buffer corretamente","invocations":1,"location":{"column":3,"line":278},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"saveInteraction deve adicionar mensagens ao buffer corretamente"},{"ancestorTitles":["PineconeMemoryService Buffer Tests"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService Buffer Tests O buffer deve acumular mensagens pequenas e fazer flush apenas quando o shouldFlushBuffer retorna true","invocations":1,"location":{"column":3,"line":323},"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"O buffer deve acumular mensagens pequenas e fazer flush apenas quando o shouldFlushBuffer retorna true"},{"ancestorTitles":["PineconeMemoryService Buffer Tests"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"PineconeMemoryService Buffer Tests O buffer deve evitar duplicatas adjacentes mantendo a integridade do histórico","invocations":1,"location":{"column":3,"line":428},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"O buffer deve evitar duplicatas adjacentes mantendo a integridade do histórico"},{"ancestorTitles":["PineconeMemoryService Buffer Tests"],"duration":2,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: \u001b[32m0\u001b[39m\nReceived number of calls: \u001b[31m1\u001b[39m\n\n1: called with 0 arguments","pass":true}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: \u001b[32m0\u001b[39m\nReceived number of calls: \u001b[31m1\u001b[39m\n\n1: called with 0 arguments\n    at Object.<anonymous> (/Users/guilhermeferraribrescia/nu-viss-laug/src/tests/PineconeBuffer.test.ts:545:33)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"PineconeMemoryService Buffer Tests O buffer deve preservar mensagens de usuário ao salvar respostas do assistente","invocations":1,"location":{"column":3,"line":488},"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"O buffer deve preservar mensagens de usuário ao salvar respostas do assistente"},{"ancestorTitles":["PineconeMemoryService Buffer Tests"],"duration":1,"failureDetails":[{"matcherResult":{"actual":true,"expected":false,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\nReceived: \u001b[31mtrue\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\nReceived: \u001b[31mtrue\u001b[39m\n    at Object.<anonymous> (/Users/guilhermeferraribrescia/nu-viss-laug/src/tests/PineconeBuffer.test.ts:615:43)\n    at Promise.then.completed (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/guilhermeferraribrescia/nu-viss-laug/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"PineconeMemoryService Buffer Tests O buffer só deve ser limpo quando o limite de tokens for atingido","invocations":1,"location":{"column":3,"line":567},"numPassingAsserts":3,"retryReasons":[],"status":"failed","title":"O buffer só deve ser limpo quando o limite de tokens for atingido"}],"endTime":1745799082603,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPineconeMemoryService Buffer Tests › shouldFlushBuffer deve identificar corretamente quando o buffer deve ser esvaziado com base nos tokens\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mfalse\u001b[39m\n    Received: \u001b[31mtrue\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 253 |\u001b[39m     service\u001b[33m.\u001b[39mcountBufferTokens \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(\u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// tokens abaixo do mínimo\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 254 |\u001b[39m     service\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mlastFlushTime \u001b[33m=\u001b[39m \u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow() \u001b[33m-\u001b[39m \u001b[35m600000\u001b[39m\u001b[33m;\u001b[39m \u001b[90m// 10 minutos atrás (> maxBufferAgeMs)\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 255 |\u001b[39m     expect(service\u001b[33m.\u001b[39mshouldFlushBuffer())\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// mesmo com tempo excedido, não deve fazer flush com poucos tokens\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 256 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 257 |\u001b[39m     \u001b[90m// 5. Teste: Inatividade do usuário não deve mais acionar o esvaziamento\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 258 |\u001b[39m     service\u001b[33m.\u001b[39mmessageBuffer \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/PineconeBuffer.test.ts\u001b[39m\u001b[0m\u001b[2m:255:41)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPineconeMemoryService Buffer Tests › O buffer deve preservar mensagens de usuário ao salvar respostas do assistente\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    Expected number of calls: \u001b[32m0\u001b[39m\n    Received number of calls: \u001b[31m1\u001b[39m\n\n    1: called with 0 arguments\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 543 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 544 |\u001b[39m     \u001b[90m// Verificar que resetBuffer NÃO foi chamado (buffer não foi limpo)\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 545 |\u001b[39m     expect(resetBufferMock)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 546 |\u001b[39m     \u001b[22m\n\u001b[2m     \u001b[90m 547 |\u001b[39m     \u001b[90m// Verificar que as mensagens do usuário ainda estão no buffer\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 548 |\u001b[39m     expect(service\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mprimaryUser\u001b[33m.\u001b[39mmessages\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/PineconeBuffer.test.ts\u001b[39m\u001b[0m\u001b[2m:545:33)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPineconeMemoryService Buffer Tests › O buffer só deve ser limpo quando o limite de tokens for atingido\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mfalse\u001b[39m\n    Received: \u001b[31mtrue\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 613 |\u001b[39m       \u001b[90m// Mesmo com tempos excedidos, não deve fazer flush se tokens estão abaixo do limite\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 614 |\u001b[39m       service\u001b[33m.\u001b[39mcountBufferTokens \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(\u001b[35m30\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 30 tokens (abaixo do mínimo)\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 615 |\u001b[39m       expect(service\u001b[33m.\u001b[39mshouldFlushBuffer())\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 616 |\u001b[39m     } \u001b[36mfinally\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 617 |\u001b[39m       \u001b[90m// Restaurar métodos originais\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 618 |\u001b[39m       service\u001b[33m.\u001b[39mcountBufferTokens \u001b[33m=\u001b[39m originalCountTokens\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/PineconeBuffer.test.ts\u001b[39m\u001b[0m\u001b[2m:615:43)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/tests/PineconeBuffer.test.ts","startTime":1745799081938,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["ConversationImportService E2E"],"duration":49,"failureDetails":[],"failureMessages":[],"fullName":"ConversationImportService E2E deve importar conversas e processar o arquivo JSON corretamente","invocations":1,"location":{"column":3,"line":147},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"deve importar conversas e processar o arquivo JSON corretamente"}],"endTime":1745799082631,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/ConversationImportService.e2e.test.tsx","startTime":1745799081957,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":33,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases Deve diferenciar strings com pequenas variações (espaços, formatação)","invocations":1,"location":{"column":3,"line":95},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Deve diferenciar strings com pequenas variações (espaços, formatação)"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases Strings vazias e undefined são tratados corretamente","invocations":1,"location":{"column":3,"line":116},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Strings vazias e undefined são tratados corretamente"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":104,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases Consultas múltiplas em rápida sucessão","invocations":1,"location":{"column":3,"line":150},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Consultas múltiplas em rápida sucessão"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases Falha na consulta ao Pinecone","invocations":1,"location":{"column":3,"line":176},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Falha na consulta ao Pinecone"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases Contextos muito longos são tratados adequadamente","invocations":1,"location":{"column":3,"line":217},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Contextos muito longos são tratados adequadamente"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases Reinicialização do contexto reseta adequadamente","invocations":1,"location":{"column":3,"line":232},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Reinicialização do contexto reseta adequadamente"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases Alterações mínimas em contextos longos geram consultas completas","invocations":1,"location":{"column":3,"line":254},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Alterações mínimas em contextos longos geram consultas completas"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases Contexto undefined seguido de string vazia","invocations":1,"location":{"column":3,"line":276},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Contexto undefined seguido de string vazia"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases Interações entre setTemporaryContext e fetchContextualMemory","invocations":1,"location":{"column":3,"line":303},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Interações entre setTemporaryContext e fetchContextualMemory"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases clearTemporaryContext limpa todos os aspectos do contexto","invocations":1,"location":{"column":3,"line":318},"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"clearTemporaryContext limpa todos os aspectos do contexto"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases clearTemporaryContext limpa o último contexto consultado","invocations":1,"location":{"column":3,"line":354},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"clearTemporaryContext limpa o último contexto consultado"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases clearTemporaryContext vs resetAll","invocations":1,"location":{"column":3,"line":382},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"clearTemporaryContext vs resetAll"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases Preservação do contexto após clearTemporaryContext","invocations":1,"location":{"column":3,"line":421},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Preservação do contexto após clearTemporaryContext"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases clearTemporaryContext limpa explicitamente lastQueriedTemporaryContext","invocations":1,"location":{"column":3,"line":451},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"clearTemporaryContext limpa explicitamente lastQueriedTemporaryContext"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases clearTemporaryContext afeta todas as instâncias de MemoryContextBuilder","invocations":1,"location":{"column":3,"line":490},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"clearTemporaryContext afeta todas as instâncias de MemoryContextBuilder"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases Interação entre clearTemporaryContext e updateLastQueriedTemporaryContext","invocations":1,"location":{"column":3,"line":529},"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"Interação entre clearTemporaryContext e updateLastQueriedTemporaryContext"},{"ancestorTitles":["TemporaryContextEdgeCases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"TemporaryContextEdgeCases hasTemporaryContextChanged lida corretamente com strings vazias","invocations":1,"location":{"column":3,"line":600},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"hasTemporaryContextChanged lida corretamente com strings vazias"}],"endTime":1745799082639,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/tests/TemporaryContextEdgeCases.test.ts","startTime":1745799081928,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1745799086036,"message":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m58\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m58\u001b[0m       mergedText: 'Test merged text content',\n    \u001b[7m  \u001b[0m \u001b[91m                ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m59\u001b[0m:\u001b[93m15\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m59\u001b[0m       metadata: {\n    \u001b[7m  \u001b[0m \u001b[91m              ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m61\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m61\u001b[0m         roles: ['user'],\n    \u001b[7m  \u001b[0m \u001b[91m             ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m62\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m62\u001b[0m         totalMessages: 3,\n    \u001b[7m  \u001b[0m \u001b[91m                     ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m63\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m63\u001b[0m         timestamps: testTimestamps, // Array de números que precisa ser convertido\n    \u001b[7m  \u001b[0m \u001b[91m                  ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m64\u001b[0m:\u001b[93m18\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m64\u001b[0m         flushedAt: Date.now(),\n    \u001b[7m  \u001b[0m \u001b[91m                 ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m65\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m65\u001b[0m         neuralSystemPhase: \"memory\", // Fase neural - hipocampo\n    \u001b[7m  \u001b[0m \u001b[91m                         ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m66\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m66\u001b[0m         processingType: \"symbolic\",\n    \u001b[7m  \u001b[0m \u001b[91m                      ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m67\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m67\u001b[0m         memoryType: \"episodic\",\n    \u001b[7m  \u001b[0m \u001b[91m                  ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m68\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m68\u001b[0m         tokenCount: 50\n    \u001b[7m  \u001b[0m \u001b[91m                  ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m70\u001b[0m:\u001b[93m6\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m')' expected.\n\n    \u001b[7m70\u001b[0m     };\n    \u001b[7m  \u001b[0m \u001b[91m     ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m143\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m143\u001b[0m       mergedText: 'Test merged text content',\n    \u001b[7m   \u001b[0m \u001b[91m                ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m144\u001b[0m:\u001b[93m15\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m144\u001b[0m       metadata: complexMetadata\n    \u001b[7m   \u001b[0m \u001b[91m              ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m145\u001b[0m:\u001b[93m6\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m')' expected.\n\n    \u001b[7m145\u001b[0m     };\n    \u001b[7m   \u001b[0m \u001b[91m     ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m180\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m180\u001b[0m   });\n    \u001b[7m   \u001b[0m \u001b[91m  ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m180\u001b[0m:\u001b[93m4\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m180\u001b[0m   });\n    \u001b[7m   \u001b[0m \u001b[91m   ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m228\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m228\u001b[0m         mergedText: `Test content for ${testCase.phase} phase`,\n    \u001b[7m   \u001b[0m \u001b[91m                  ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m229\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m229\u001b[0m         metadata: {\n    \u001b[7m   \u001b[0m \u001b[91m                ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m231\u001b[0m:\u001b[93m16\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m231\u001b[0m           roles: [testCase.speakerType],\n    \u001b[7m   \u001b[0m \u001b[91m               ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m232\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m232\u001b[0m           totalMessages: 1,\n    \u001b[7m   \u001b[0m \u001b[91m                       ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m233\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m233\u001b[0m           timestamps: [Date.now()],\n    \u001b[7m   \u001b[0m \u001b[91m                    ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m234\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m234\u001b[0m           flushedAt: Date.now(),\n    \u001b[7m   \u001b[0m \u001b[91m                   ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m235\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m235\u001b[0m           neuralSystemPhase: testCase.phase,\n    \u001b[7m   \u001b[0m \u001b[91m                           ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m236\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m236\u001b[0m           processingType: \"symbolic\",\n    \u001b[7m   \u001b[0m \u001b[91m                        ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m237\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m237\u001b[0m           memoryType: \"episodic\",\n    \u001b[7m   \u001b[0m \u001b[91m                    ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m238\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m238\u001b[0m           tokenCount: 50\n    \u001b[7m   \u001b[0m \u001b[91m                    ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m270\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m',' expected.\n\n    \u001b[7m270\u001b[0m   });\n    \u001b[7m   \u001b[0m \u001b[91m  ~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m271\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m271\u001b[0m });\n    \u001b[7m   \u001b[0m \u001b[91m~\u001b[0m\n    \u001b[96msrc/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts\u001b[0m:\u001b[93m271\u001b[0m:\u001b[93m2\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m271\u001b[0m });\n    \u001b[7m   \u001b[0m \u001b[91m ~\u001b[0m\n","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/PineconeMetadataTests.test.ts","startTime":1745799086036,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["TranscriptionPanel Importação E2E"],"duration":3315,"failureDetails":[],"failureMessages":[],"fullName":"TranscriptionPanel Importação E2E deve importar conversas, mostrar progresso e resumo","invocations":1,"location":{"column":3,"line":222},"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"deve importar conversas, mostrar progresso e resumo"}],"endTime":1745799085972,"message":"","name":"/Users/guilhermeferraribrescia/nu-viss-laug/src/components/context/deepgram/services/memory/TranscriptionPanel.test.tsx","startTime":1745799081962,"status":"passed","summary":""}],"wasInterrupted":false}
